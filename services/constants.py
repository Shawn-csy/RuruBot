astro = {
    '牡羊座': 0, 
    '金牛座': 1, 
    '雙子座': 2, 
    '巨蟹座': 3, 
    '獅子座': 4, 
    '處女座': 5, 
    '天秤座': 6, 
    '天蠍座': 7, 
    '射手座': 8, 
    '魔羯座': 9,
    '水瓶座': 10, 
    '雙魚座': 11
}
astro_icons = {
        "牡羊座": "♈",
        "金牛座": "♉",
        "雙子座": "♊",
        "巨蟹座": "♋",
        "獅子座": "♌",
        "處女座": "♍",
        "天秤座": "♎",
        "天蠍座": "♏",
        "射手座": "♐",
        "魔羯座": "♑",
        "水瓶座": "♒",
        "雙魚座": "♓"
    }
astro_type = ['today', 'weekly', 'monthly']

gemini_system_prompt = "你是一個黑貓仙人,名稱是露露，擅長根據籤詩結果，給出簡短的解釋和建議 通常不超過30字。"

# 添加指令映射
command_patterns = {
    "radar": [
        "雷達", "radar", "天氣雷達", "氣象雷達"
    ],
    "astro": {
        "patterns": ["星座", "運勢", "運氣"],
        "weekly_patterns": ["-w", "每週", "本週運勢"],
        "signs": astro
    },
    "ticket": [
        "抽籤", "淺草寺", "抽淺草寺", "想抽籤", "想問感情","想問工作","想問什麼財運","想問健康"
        "淺草籤", "抽一張籤", "抽個籤",  # 添加更多常見表達
        "幫我抽籤", "幫我抽一張", "幫忙抽籤"
    ],
    "sixty_poem": [
        "六十甲子籤", "甲子籤", "抽甲子籤", "抽六十甲子籤",
        "抽個甲子籤", "幫我抽甲子籤"  # 添加更多常見表達
    ],
    "podcast": [
        "國師", "本週國師", "唐綺陽", 
        "本週運勢", "國師運勢"  # 添加更多常見表達
    ],
    "help": [
        "--help", "使用說明", "幫我看看使用說明"
    ]
}

# AI 指令判斷的提示
command_prompt = """
你是一個智能指令解析器，需要將用戶輸入的自然語言文本匹配到最合適的指令。請嚴格按照規則解析。

可用的指令類型和關鍵字：
1. radar (氣象雷達):
   - 關鍵字: 雷達、radar、天氣雷達、氣象雷達、天氣雲圖、回波圖、氣象圖
   - 參數: {}

2. astro (星座運勢):
   - 星座名稱必須完全匹配: 牡羊座、金牛座、雙子座、巨蟹座、獅子座、處女座、天秤座、天蠍座、射手座、魔羯座、水瓶座、雙魚座
   - 時間類型: 
     * daily: 今天、今日、現在
     * weekly: 每週、本週、這週
   - 必須包含參數: 
     {
       "astro_name": "星座名稱",
       "type": "daily或weekly"
     }

3. ticket (淺草寺籤):
   - 關鍵字: 抽籤、淺草寺、想抽籤、想問感情、想問工作、想問什麼財運、想問健康
   - 必須包含參數: {"text": "使用者問題"}

4. sixty_poem (六十甲子籤):
   - 關鍵字: 六十甲子籤、甲子籤、抽甲子籤
   - 必須包含參數: {"text": "使用者問題"}

5. podcast (國師運勢):
   - 關鍵字: 國師、本週國師、唐綺陽
   - 參數: {}

6. help (使用說明):
   - 關鍵字: --help, 使用說明, 幫我看看使用說明
   - 參數: {}

解析規則：
1. 必須返回完整的 JSON 格式
2. 星座名稱必須完全匹配列表中的其中一個
3. 如果找不到明確的時間類型，astro 命令預設使用 "daily"
4. 抽籤類命令必須提取用戶問題作為參數

輸出格式必須是以下其中一種：
{"command": "astro", "params": {"astro_name": "雙子座", "type": "daily"}}
{"command": "ticket", "params": {"text": "工作運"}}
{"command": "radar", "params": {}}
{"command": "podcast", "params": {}}
{"command": "sixty_poem", "params": {"text": "感情運"}}
{"command": "help", "params": {}}
用戶輸入: """